  <main class="container">
    <div id="search" class="well row">
      <form id="searchForm" class="col-sm-9 col-xs-9" action="">
        <input name="searchText" id="searchText" ng-model="searchText" class="col-sm-7 col-xs-7" placeholder="Search using Keywords, Topics, Category" type="text" />
        <button type="submit" class="btn btn-success col-sm-2 col-xs-2" ng-click="onSearch()" name="button"><span class="glyphicon glyphicon-search"></span> Search</button>
        <button type="reset" class="btn btn-default col-sm-2 col-xs-2" ng-click="onReset()"><span class="glyphicon glyphicon-remove"></span> Clear </button>
      </form>
      <div id='noOfQuestions' uib-dropdown class='col-sm-3 col-xs-3 actionBar'>
        <button uib-dropdown-toggle class="btn btn-default" type="button">
          {{noOfQuestions[selectedRowCountIndex]}}
          <span class="caret"></span></button>
          <ul uib-dropdown-menu >
            <li class="noofRows" ng-repeat="x in noOfQuestions" ng-click="noOfRowChange(x, $index)" data-rowcount="{{x}}">
              <a href>{{x}}</a>
            </li>
          </ul>
        </div>
      </div>
      <div id="questionContainer" class="row">
        <table id="questionList" class="table table-bordered table-responsive table-hover">
          <thead>
            <tr>
              <th data-column-id='question' >Question</th>
              <th data-column-id='topicId' >Topics</th>
              <th data-column-id='categories'>Categories</th>
              <th data-column-id='difficultyLevel'>Difficulty Level</th>
              <th data-column-id='timesUsed'>Times Used</th>
              <th data-column-id='correctRatio'>Correct Ratio</th>
              <th data-column-id='frequency'>Frequecy per Day</th>
              <th data-column-id='lastEdited'>Last Edited</th>
              <th data-column-id='createdOn'>Created On</th>
              <th data-column-id='commands'>Edit/Delete</th>
            </tr>
          </thead>
          <tbody>
            <tr class="question-row" ng-repeat="x in questions">
              <td class="question">{{x.question}}</td>
              <td>{{x.topics}}</td>
              <td>{{x.categories}}</td>
              <td>{{x.difficultyLevel}}</td>
              <td>{{x.timesUsed}}</td>
              <td>{{x.correctRatio}}</td>
              <td>{{x.frequency}}</td>
              <td>{{dateFormater(x.lastEdited) | date:'MM/dd/yyyy'}}</td>
              <td>{{dateFormater(x.createdOn) | date:'MM/dd/yyyy'}}</td>
              <td>
                <button type="button" class="btn btn-xs btn-default command-edit" >
                   <!-- data-row-id="{{@index}}" data-question-id="{{questionId}}"> -->
                  <span class="glyphicon glyphicon-pencil"></span>
                </button>
                <button type="button" class="btn btn-xs btn-default command-delete">
                  <!-- data-row-id="{{@index}}" data-question-id="{{questionId}}"> -->
                  <span class="glyphicon glyphicon-remove"></span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="pageNo" class="row">
        <!-- Pagination and Page Tracker are generated by Paging plugin in client side. -->
        <div paging page="currentPage" page-size="selectedRowCount" total="totalQuestions"
        text-first="<<"
        text-last=">>"
        text-next=">"
        text-prev="<"
        show-prev-next="true"
        show-first-last="true"
        ul-class="pagination col-sm-8 col-xs-6"
        paging-action="onPageclick(page)">
        </div>
        <p class="pageTracker col-sm-4 col-xs-6">
          Showing {{firstQuestion + 1}} to {{lastQuestion}} of {{totalQuestions}} Questions
        </p>
      </div>

      <!-- Modal --> 
      <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <form id="editQuestion" method="post">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit Question</h4>
                <div class="form-inline pull-right wrapper">
                  <label for="createdOn">Created Dated:</label>
                  <label class='divider' name="createdOn"><em>{{dateFormater(selectedQuestion.createdOn) | date:'MM/dd/yyyy')}}</em></label>
                  <label for="lastEdited">Last Edited:</label>
                  <label><em>{{dateFormater lastEdited}}</em></label>
                  <input type="hidden" id="lastEdited" name="lastEdited" />
                </div>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <input type="hidden" name="questionId" value="{{questionId}}" />
                  <label for="question">Question: </label><strong class="required text-danger">*</strong>
                  <textarea type="text" class="form-control" name="question" rows="4" data-toggle="tooltip" title="Question cannot be empty."> {{question}} </textarea>
                </div>
                <div class="form-group">
                  {{{generateOptions this}}}
                </div>
                <div class="form-group">
                  <label for="correctIndex">Correct index:</label><strong class="required text-danger">*</strong>
                  <input type="number" class="form-control" name="correctIndex" min="1" max="{{getMax this}}" value="{{correctIndex}}"  data-toggle="tooltip" title="Correct Index cannot be empty." />
                </div>
                <div class="form-group">
                  <label for="correctIndex">Image:</label>
                  <input type="text" class="form-control" name="correctIndex" value="{{image}}" />
                </div>
                <div class="wrap">
                  <div class="form-inline">
                    <label for="topicId">Topics:</label><strong class="required text-danger">*</strong>
                    <div id="topicsWell">
                      {{{generateTpcs this.topics}}}
                    </div>
                  </div>
                  <div class="form-inline" data-toggle="tooltip">
                    <strong id="messageArea" class="text-warning form-hidden"></strong>
                    <input type="text" class="form-control" id="topicName" list="topicList" placeholder="Enter Topics to add"  data-toggle="tooltip" title="Topics cannot be empty. Please add one." />
                    <input type="button" class="form-control btn btn-warning" id="addTopicId" value="Add" />
                    <input type="hidden" id="topicIds" name="topicsIds" value="{{topicId}}" />
                    <div class="form-hidden" id="newTopicForm">
                      <input type="text" class="form-control" list="categoryList" placeholder="Enter category to add" />
                      <input type="button" class="form-control btn btn-warning" id="addCategories" value="Add" />
                      <input type="button" class="form-control btn btn-default" id="cancelCategories" value="Cancel" />
                      <p></p>
                    </div>
                    <div class="form-hidden" id="newCategoryForm">
                      <strong class="text-warning" >Are you sure you want to add new Category?</strong>
                        <input type="button" class="form-control btn btn-warning" id="yesBtn" value="Yes" />
                        <input type="button" class="form-control btn btn-default" id="noBtn" value="No" />
                    </div>
                  </div>
                </div>
                <div class="form-inline">
                  <label for="categories">Categories:</label>
                  <em><label id="categories" name="categories" >{{categories}}</label></em>
                </div>
                <div class="form-group">
                  <label for="difficultyLevel">Difficulty Level:</label>
                  <label  class='divider' name="difficultyLevel">{{difficultyLevel}}</label>
                  <label for="timesUsed">Times Used: </label>
                  <label  class='divider' name="timesUsed">{{timesUsed}}</label>
                  <label for="correctRatio">Correct Ratio:</label>
                  <label  class='divider' name="correctRatio">{{correctRatio}}</label>
                  <label for="frequency">Frequency:</label>
                  <label name="frequency">{{frequency}}</label>
                  <input type="hidden" name="requestType" value="edit" />
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>
    <div id="loadTemplates">
      <!-- Template for edit Modal -->
      <script type="text/x-handlebars-template" id="modalTmp"> 
        <!-- Modal --> 
        <div class="modal fade" id="myModal" role="dialog">
          <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
              <form id="editQuestion" method="post">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Edit Question</h4>
                  <div class="form-inline pull-right wrapper">
                    <label for="createdOn">Created Dated:</label>
                    <label class='divider' name="createdOn"><em>{{dateFormater createdOn}}</em></label>
                    <label for="lastEdited">Last Edited:</label>
                    <label><em>{{dateFormater lastEdited}}</em></label>
                    <input type="hidden" id="lastEdited" name="lastEdited" />
                  </div>
                </div>
                <div class="modal-body">
                  <div class="form-group">
                    <input type="hidden" name="questionId" value="{{questionId}}" />
                    <label for="question">Question: </label><strong class="required text-danger">*</strong>
                    <textarea type="text" class="form-control" name="question" rows="4" data-toggle="tooltip" title="Question cannot be empty."> {{question}} </textarea>
                  </div>
                  <div class="form-group">
                    {{{generateOptions this}}}
                  </div>
                  <div class="form-group">
                    <label for="correctIndex">Correct index:</label><strong class="required text-danger">*</strong>
                    <input type="number" class="form-control" name="correctIndex" min="1" max="{{getMax this}}" value="{{correctIndex}}"  data-toggle="tooltip" title="Correct Index cannot be empty." />
                  </div>
                  <div class="form-group">
                    <label for="correctIndex">Image:</label>
                    <input type="text" class="form-control" name="correctIndex" value="{{image}}" />
                  </div>
                  <div class="wrap">
                    <div class="form-inline">
                      <label for="topicId">Topics:</label><strong class="required text-danger">*</strong>
                      <div id="topicsWell">
                        {{{generateTpcs this.topics}}}
                      </div>
                    </div>
                    <div class="form-inline" data-toggle="tooltip">
                      <strong id="messageArea" class="text-warning form-hidden"></strong>
                      <input type="text" class="form-control" id="topicName" list="topicList" placeholder="Enter Topics to add"  data-toggle="tooltip" title="Topics cannot be empty. Please add one." />
                      <input type="button" class="form-control btn btn-warning" id="addTopicId" value="Add" />
                      <input type="hidden" id="topicIds" name="topicsIds" value="{{topicId}}" />
                      <div class="form-hidden" id="newTopicForm">
                        <input type="text" class="form-control" list="categoryList" placeholder="Enter category to add" />
                        <input type="button" class="form-control btn btn-warning" id="addCategories" value="Add" />
                        <input type="button" class="form-control btn btn-default" id="cancelCategories" value="Cancel" />
                        <p></p>
                      </div>
                      <div class="form-hidden" id="newCategoryForm">
                        <strong class="text-warning" >Are you sure you want to add new Category?</strong>
                          <input type="button" class="form-control btn btn-warning" id="yesBtn" value="Yes" />
                          <input type="button" class="form-control btn btn-default" id="noBtn" value="No" />
                      </div>
                    </div>
                  </div>
                  <div class="form-inline">
                    <label for="categories">Categories:</label>
                    <em><label id="categories" name="categories" >{{categories}}</label></em>
                  </div>
                  <div class="form-group">
                    <label for="difficultyLevel">Difficulty Level:</label>
                    <label  class='divider' name="difficultyLevel">{{difficultyLevel}}</label>
                    <label for="timesUsed">Times Used: </label>
                    <label  class='divider' name="timesUsed">{{timesUsed}}</label>
                    <label for="correctRatio">Correct Ratio:</label>
                    <label  class='divider' name="correctRatio">{{correctRatio}}</label>
                    <label for="frequency">Frequency:</label>
                    <label name="frequency">{{frequency}}</label>
                    <input type="hidden" name="requestType" value="edit" />
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </script>
      <!-- Template for alertArea -->
      <script type="text/x-handlebars-template" id="alertTmp"> 
        <div class="alert alert-{{status}}" >
          {{message}}
          <a href="#" class="close" data-dismiss="alert">&times;</a>
        </div>
      </script>
      <!-- Template for Generating Option -->
      <script type="text/x-handlebars-template" id="generateOptionsTmp">
        <label for='options'>Options:</label><strong class="required text-danger">*</strong>
        <ul class="nav nav-tabs">
          {{#each this}}
            {{#if (equal @index 1)}}
              <li class="active"><a data-toggle="tab" class='tab' href="#option{{@index}}">{{@index}}</a></li>
            {{else}}
              <li><a data-toggle="tab" class='tab' href="#option{{@index}}">{{@index}}</a></li>
            {{/if}}
          {{/each}}
        </ul>

        <div class="tab-content">
          {{#each this}}
            {{#if (equal @index 1)}}
              <div id="option{{@index}}" class="tab-pane form-group fade in active">
                <textarea class="form-control" rows="4" name="option{{@index}}" data-toggle="tooltip" title="Option {{@index}} cannot be empty.">{{this}}</textarea>
              </div>
            {{else}}
              <div id="option{{@index}}" class="tab-pane form-group fade in">
                <textarea class="form-control" rows="4" name="option{{@index}}" data-toggle="tooltip" title="Option {{@index}} cannot be empty.">{{this}}</textarea>
              </div>
            {{/if}}
          {{/each}}
        </div>
      </script>

      <script type="text/x-handlebars-template" id="topicWellTmp">
        {{#each this}}
          <div class="well well-sm topics" data-topic-id="{{@index}}">
            {{this}} <span class="close" >&times; </span>
          </div>
        {{/each}}
      </script>
      <!--datalist template-->
      <script type="text/x-handlebars-template" id="datalistTmp">
        <datalist>
          {{#each this}}
            <option value="{{name}}">
          {{/each}}
        </datalist>
      </script>
    </div>
